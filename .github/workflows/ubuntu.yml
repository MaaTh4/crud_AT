runs-on: ubuntu-latest

steps:
  # 1. Checkout
  - name: Checkout
    uses: actions/checkout@v4

  # 2. Configurar Java + Maven
  - name: Setup Java
    uses: actions/setup-java@v4
    with:
      java-version: '19'
      distribution: 'temurin'
      cache: maven

  # 3. Instalar Chrome e dependências (caso precise garantir a versão)
  - name: Install Chrome
    run: |
      sudo apt-get update
      sudo apt-get install -y google-chrome-stable

  # 4. Rodar Maven com Selenium Headless
  - name: Run Tests
    run: mvn clean test -Dheadless=true

  # 5. Publicar relatórios
  - name: Upload Reports
    if: always()
    uses: actions/upload-artifact@v4
    with:
      name: surefire-reports
      path: target/surefire-reports/
